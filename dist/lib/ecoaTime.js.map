{"version":3,"sources":["../../src/lib/ecoaTime.js"],"names":["jsDateToEcoaTime","jsDate","date","Date","dateDecr","getHours","getTime","month","getMonth","dateStr","getDate","hoursStr","getFullYear","ecoaTimeToJsDate","ecoaTime","now","hour","substr","convJsDateToEcoaTime","console","log"],"mappings":"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","sourcesContent":["/*\n * Converts Javascript Date to ecoaTime.\n */\nexport function jsDateToEcoaTime(jsDate) {\n    if (typeof jsDate == 'undefined') return null;\n\n    const date = new Date(jsDate);\n    let dateDecr = null;\n    if (date.getHours() == 0) {\n        dateDecr = new Date(date.getTime() - 24*3600*1000);\n    } else {\n        dateDecr = date;\n    }\n\n    let month = '';\n    if (dateDecr.getMonth() < 9) {\n        month = '0' + (dateDecr.getMonth() + 1);\n    } else {\n        month = '' + (dateDecr.getMonth() + 1);\n    }\n\n    let dateStr = '';\n    if (dateDecr.getDate() < 10) {\n        dateStr = '0' + dateDecr.getDate();\n    } else {\n        dateStr = '' + dateDecr.getDate();\n    }\n\n    let hoursStr = '';\n    if (date.getHours() == 0) { \n        hoursStr = '24';\n    } else if (date.getHours() < 10) {\n        hoursStr = '0' + date.getHours();\n    } else {\n        hoursStr = '' + date.getHours();\n    }\n\n    return dateDecr.getFullYear()+ '' + month + dateStr + hoursStr + '00';\n}\n\n// convert ecoaTime to standard JS Date object\n// 24시인 경우 23시 기준 JS Date를 구한 후 다시 1시간을 더하여 JS Date를 만든다\n// 실제 시간이 2018년 1월 1일 0시일 때, EcoaTime은 2017123124 로 표현된다\nexport function ecoaTimeToJsDate(ecoaTime) {\n    if (typeof ecoaTime == 'undefined') return null;\n\n    if (ecoaTime == 0) {\n        // time is 0 when misebig failed to connect to internet\n        // just return current time\n        const now = new Date()\n        return new Date(\n            now.getFullYear(), \n            now.getMonth(),\n            now.getDate(),\n            now.getHours()\n        )\n    }\n\n    const hour = ecoaTime.substr(8,2)\n    let now = null;\n\n    if (hour === '24') {\n        //console.log(`hour is 24`)\n        now = new Date(ecoaTime.substr(0, 4),   // Year\n                    ecoaTime.substr(4, 2)-1,    // Month\n                    ecoaTime.substr(6, 2),      // Date\n                    '23',                   // Hour\n                    ecoaTime.substr(10, 2))\n        now = new Date(now.getTime() + 3600*1000)\n    } else {\n        //console.log(`hour is not 24`)\n        now = new Date(ecoaTime.substr(0, 4), \n                    ecoaTime.substr(4, 2)-1,\n                    ecoaTime.substr(6, 2),\n                    ecoaTime.substr(8, 2),\n                    ecoaTime.substr(10, 2))\n    }\n\n    return now;\n}\n\n\n/*\n * jsDate 를 ecoaTime 으로 변환\n *\n * 0시는 전날 24시로 변경한다. \n * 예) 2일 0시는 1일 24시이다. 따라서, 2017010020000 은 201710012400 이 되도록 한다.\n */\nexport function convJsDateToEcoaTime(jsDate) {\n    const month = jsDate.getMonth() + 1;\n    let hour = jsDate.getHours();\n    let date = jsDate.getDate();\n    date = hour === 0 ? date-1 : date;\n    hour = hour === 0 ? 24 : hour;\n\n    console.log(`getEcoaTime2: original Hour=${jsDate.getHours()}, new ${month}.${date}. ${hour}:00`);\n\n    console.log(jsDate.getMonth()+1 < 10 ? '0' + jsDate.getMonth()+1 : jsDate.getMonth()+1)\n    console.log(month < 10 ? '0' + month : month)\n    const ecoaTime = '' + jsDate.getFullYear() + \n        ( month < 10 ? '0' + month : month ) +\n        ( date < 10 ? '0' + date : date ) +  \n        ( hour < 10 ? '0' + hour : hour) + '00';\n        \n    console.log(ecoaTime);\n    \n    return ecoaTime;\n}"],"file":"ecoaTime.js"}